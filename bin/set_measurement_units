#!/bin/bash

if [ -z $1 ]; then
    echo "Missing module argument. Aborting..."
    exit
fi

sudo systemctl stop tgr.sensor.module

/home/pi/tgr/bin/arduino-cli upload \
    -b arduino:avr:uno \
    -p /dev/ttyACM0 \
    --input-dir /home/pi/tgr/modules/$1/sensor \
    /home/pi/tgr/src/modules/sensor

sudo systemctl start tgr.sensor.module
